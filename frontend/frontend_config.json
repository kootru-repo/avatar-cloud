{
  "project": {
    "name": "Gemini Live Avatar",
    "version": "1.0.0",
    "description": "Voice-to-voice conversation with Gemini 2.5 Flash"
  },
  "api": {
    "projectId": "avatar-478217",
    "model": "models/gemini-2.5-flash-native-audio-preview-09-2025",
    "apiHost": "generativelanguage.googleapis.com",
    "region": "global",
    "proxyUrl": {
      "local": "ws://localhost:8080",
      "cloud": "wss://gemini-avatar-backend-580499038386.us-central1.run.app"
    }
  },
  "backend": {
    "port": 8080,
    "host": "0.0.0.0",
    "wsUrl": {
      "local": "ws://localhost:8080",
      "cloud": "wss://gemini-avatar-backend-580499038386.us-central1.run.app"
    }
  },
  "firebase": {
    "_comment": "Firebase configuration for authentication and hosting. Get from Firebase Console > Project Settings > Your apps > SDK setup and configuration",
    "projectId": "avatar-478217",
    "appId": "1:580499038386:web:303450a3e1a2da9289a9ab",
    "apiKey": "AIzaSyCs3DfEW-CIrv9HUZJwPExTVHFNuRuYor4",
    "authDomain": "avatar-478217.firebaseapp.com",
    "enabled": true,
    "_usage": "Set enabled=true to require Firebase Auth login. Set enabled=false for local development without login."
  },
  "cloud": {
    "_comment": "Cloud-specific configuration. Videos hosted on Cloud Storage for faster global delivery.",
    "videosBucket": "avatar-478217-videos",
    "videosBasePath": "https://storage.googleapis.com/avatar-478217-videos/video"
  },
  "video": {
    "_comment_sources": "Avatar video files. Automatically uses local files in dev or Cloud Storage URLs in production.",
    "sources": {
      "local": {
        "idle": "media/video/idle.webm",
        "listening": "media/video/idle.webm",
        "speaking": "media/video/talking.webm",
        "dancing": "media/video/dance.webm",
        "goodbye": "media/video/see-ya.webm"
      },
      "cloud": {
        "idle": "https://storage.googleapis.com/avatar-478217-videos/video/idle.webm",
        "listening": "https://storage.googleapis.com/avatar-478217-videos/video/idle.webm",
        "speaking": "https://storage.googleapis.com/avatar-478217-videos/video/talking.webm",
        "dancing": "https://storage.googleapis.com/avatar-478217-videos/video/dance.webm",
        "goodbye": "https://storage.googleapis.com/avatar-478217-videos/video/see-ya.webm",
        "_comment": "Update bucket name after: gsutil mb gs://avatar-478217-videos && gsutil -m cp frontend/media/video/*.webm gs://avatar-478217-videos/video/"
      }
    },
    "baseVideoDuration": 10.0,
    "displayWidth": 1024,
    "displayHeight": 1024,
    "frameInterval": 1000,
    "screenCaptureInterval": 1000
  },
  "speakingCycle": {
    "_comment": "Video playback pattern while speaking: play first N seconds forward, then cycle reverse/forward",
    "enabled": true,
    "initialForwardDuration": 3.0,
    "reverseDuration": 2.0,
    "forwardDuration": 2.0
  },
  "microPalindrome": {
    "enabled": false,
    "segmentDuration": 2.0,
    "checkInterval": 33,
    "edgeBuffer": 0.05,
    "frameZeroThreshold": 0.1
  },
  "variations": {
    "enabled": false,
    "speakingVariations": [
      {
        "speed": 1.0,
        "startOffset": 0.0,
        "reverse": false,
        "name": "normal"
      },
      {
        "speed": 0.97,
        "startOffset": 0.0,
        "reverse": false,
        "name": "slightly_slower"
      },
      {
        "speed": 1.03,
        "startOffset": 0.0,
        "reverse": false,
        "name": "slightly_faster"
      },
      {
        "speed": 1.0,
        "startOffset": 3.0,
        "reverse": false,
        "name": "offset_start"
      }
    ]
  },
  "audio": {
    "outputSampleRate": 24000,
    "inputSampleRate": 16000,
    "responseModalities": [
      "AUDIO"
    ],
    "pcmFormat": "PCM16LE",
    "bytesPerSample": 2,
    "chunkLoggingInterval": 50,
    "_comment_vad": "DEPRECATED: Client-side VAD is no longer used. Gemini's automatic VAD (geminiVAD section) handles speech detection. These settings are kept for backward compatibility.",
    "vadThreshold": 0.03,
    "vadSilenceDuration": 1500,
    "_comment_bufferLimits": "Buffer safeguards prevent WebSocket error 1007 from large payloads. maxContinuousSpeechSeconds clears stale background noise. maxPayloadSize prevents oversized chunks.",
    "maxContinuousSpeechSeconds": 10,
    "maxPayloadSize": 200000
  },
  "geminiVoice": {
    "enabled": true,
    "voiceName": "Algenib",
    "_comment_affectiveDialog": "Adapts response style to input expression and tone. Requires API v1alpha.",
    "affectiveDialog": true
  },
  "geminiVAD": {
    "_comment": "Google boilerplate VAD settings. LOW sensitivity is default. prefixPaddingMs=20 and silenceDurationMs=100 are Google recommended defaults. Client-side barge-in is DISABLED (see audio-recorder.js).",
    "startSensitivity": "START_SENSITIVITY_LOW",
    "endSensitivity": "END_SENSITIVITY_LOW",
    "prefixPaddingMs": 20,
    "silenceDurationMs": 100
  },
  "timing": {
    "transitionDelay": {
      "immediate": 50,
      "smooth": 100,
      "default": 100
    },
    "smoothTransition": {
      "maxWaitForLoopEnd": 0.5,
      "nearStartThreshold": 0.5
    },
    "responseTimeout": 15000,
    "connectionTimeout": 10000,
    "_comment_audioChunkInterval": "How often to send audio chunks to Gemini (ms). Lower = more frequent chunks, reduces buffer accumulation. Gemini's automatic VAD handles speech detection.",
    "audioChunkInterval": 500,
    "metricsUpdateInterval": 1000,
    "_comment_interruptCooldownMs": "Cooldown period after barge-in (ms). During this time, user audio is buffered instead of triggering new responses. Reduced from 2000ms to allow faster conversational flow.",
    "interruptCooldownMs": 500,
    "_comment_interruptThreshold": "Threshold protection prevents rapid barge-in stacking. Increased limits to avoid blocking normal speech patterns when using aggressive VAD (100ms silence).",
    "maxInterruptsPerWindow": 10,
    "interruptWindowMs": 5000
  },
  "audioReactivity": {
    "enabled": false,
    "fftSize": 128,
    "smoothingTimeConstant": 0.8,
    "speedVariation": 0.15,
    "smoothingFactor": 0.1,
    "baseSpeedMin": 0.95,
    "baseSpeedMax": 1.1
  },
  "debug": {
    "enabled": false,
    "verboseLogging": false,
    "logChunkDetails": true,
    "logMicroPalindromeState": true,
    "logAudioDuration": true,
    "logMetrics": true,
    "console": {
      "maxMessages": 10,
      "width": 350,
      "maxHeight": 300,
      "fontSize": 11
    }
  },
  "speechRecognition": {
    "language": "en-US",
    "continuous": true,
    "interimResults": true
  },
  "textToSpeech": {
    "language": "en-US",
    "voicePreference": "Google",
    "rate": 1.0,
    "pitch": 1.0,
    "volume": 1.0
  },
  "cookies": {
    "defaultExpirationDays": 365
  },
  "ui": {
    "defaultSystemInstructions": "",
    "_comment_systemInstructions": "Leave empty to use backstory-based persona from docs/whinny_backstory.json. The persona will be loaded automatically with strict character boundaries.",
    "avatarStatusUpdateInterval": 100
  },
  "danceMode": {
    "enabled": true,
    "musicFile": {
      "local": "media/music/dance.mp3",
      "cloud": "https://storage.googleapis.com/avatar-478217-videos/music/dance.mp3"
    },
    "duration": 8584,
    "volume": 0.3,
    "_comment": "Dance mode triggered by Gemini function calling (trigger_dance_mode). Duration matches video exactly (8.584s) with 1s fade out. Plays background music at specified volume (0.0-1.0) while showing dance video. Gemini continues speaking during dance."
  },
  "goodbyeMode": {
    "enabled": true,
    "duration": 5084,
    "audioDelayMs": 750,
    "_comment": "Goodbye mode triggered by Gemini function calling (trigger_goodbye_mode). Duration matches video exactly (5.084s). Avatar says 'See you later!' during goodbye animation. audioDelayMs delays audio playback to sync with video (video starts immediately, audio delayed)."
  },
  "soundEffects": {
    "crowdClapping": {
      "local": "media/music/crowd-clapping.mp3",
      "cloud": "https://storage.googleapis.com/avatar-478217-videos/music/crowd-clapping.mp3"
    },
    "_comment": "Sound effects triggered by various events"
  },
  "performance": {
    "maxChunkHistory": 100,
    "maxResponseHistory": 100,
    "preloadVideos": true,
    "audioBufferSize": 4096
  },
  "features": {
    "speechRecognition": true,
    "textToSpeech": false,
    "videoInput": true,
    "screenShare": true,
    "metrics": true,
    "debugConsole": false
  },
  "closedCaptions": {
    "_comment": "Industry-standard closed captions for live audio (FCC/WCAG AAA compliant)",

    "_comment_typography": "Proportional sans-serif for 13-20% faster reading than monospace",
    "fontFamily": "'Roboto', 'Helvetica Neue', Arial, sans-serif",
    "fontSize": 26,
    "fontWeight": 500,
    "lineHeight": 1.4,

    "_comment_visual": "Yellow on black = ~15:1 contrast (exceeds WCAG AAA 7:1 requirement)",
    "textColor": "#FFFF00",
    "backgroundColor": "rgba(0, 0, 0, 0.8)",
    "textShadow": "1px 1px 2px rgba(0,0,0,0.9), 0 0 4px rgba(0,0,0,0.6)",

    "_comment_positioning": "Inside video frame at bottom edge (moved down per user request)",
    "position": "inVideo",
    "safeMarginBottom": "0%",
    "safeMarginHorizontal": "10%",

    "_comment_dimensions": "Sized for 2-line roll-up display",
    "width": 820,
    "maxWidthVh": 72,
    "maxWidthVw": 72,
    "padding": 12,
    "borderRadius": 4,

    "_comment_display": "2-line roll-up with buffered display at 170 WPM (original FCC design)",
    "displayMode": "rollup",
    "maxLines": 2,
    "maxCharsPerLine": 37,

    "_comment_timing": "170 WPM = industry standard (353ms per word). Buffer stores text, display runs independently.",
    "targetWPM": 170,
    "wordDelayMs": 353,

    "_comment_interim": "Visual distinction between interim and final transcriptions",
    "interimOpacity": 0.85,
    "finalOpacity": 1.0,

    "_comment_accessibility": "WCAG AAA compliance features",
    "antiAliasing": true,
    "textRendering": "optimizeLegibility",
    "contrastRatio": "AAA"
  },
  "typography": {
    "_comment": "Centralized font settings. All font sizes use clamp(min, preferred, max) for responsive scaling.",
    "fontFamily": {
      "primary": "'Orbitron', sans-serif",
      "secondary": "'Roboto Mono', monospace"
    },
    "header": {
      "title": {
        "fontSizeMin": 22,
        "fontSizePreferred": "3.6vh",
        "fontSizeMax": 34,
        "fontWeight": 900,
        "letterSpacing": 3
      },
      "subtitle": {
        "fontSizeMin": 11,
        "fontSizePreferred": "1.44vh",
        "fontSizeMax": 14,
        "fontWeight": 400,
        "letterSpacing": 2
      }
    },
    "status": {
      "small": {
        "fontSizeMin": 9,
        "fontSizePreferred": "1.1vh",
        "fontSizeMax": 11,
        "fontWeight": 700,
        "letterSpacing": 1.2
      },
      "medium": {
        "fontSizeMin": 11,
        "fontSizePreferred": "1.4vh",
        "fontSizeMax": 14,
        "fontWeight": 700,
        "letterSpacing": 1.5
      },
      "large": {
        "fontSizeMin": 10,
        "fontSizePreferred": "1.2vh",
        "fontSizeMax": 12,
        "fontWeight": 700,
        "letterSpacing": 1
      }
    },
    "toggle": {
      "inactive": {
        "fontSizeMin": 9,
        "fontSizePreferred": "1.1vh",
        "fontSizeMax": 11,
        "fontWeight": 600,
        "letterSpacing": 1.5
      },
      "active": {
        "fontSizeMin": 10,
        "fontSizePreferred": "1.2vh",
        "fontSizeMax": 12,
        "fontWeight": 700,
        "letterSpacing": 1
      }
    },
    "closedCaptions": {
      "fontSize": 26,
      "fontWeight": 400,
      "lineHeight": 1.6
    },
    "debugConsole": {
      "fontSizeMin": 10,
      "fontSizePreferred": "1.2vh",
      "fontSizeMax": 12
    }
  }
}